<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Docker Test App - Frontend</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f5f5f5;
}
.container {
    max-width: 800px;
    margin: 0 auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
h1 {
    color: #333;
    text-align: center;
}
.status {
    padding: 10px;
    margin: 10px 0;
    border-radius: 4px;
    font-weight: bold;
}
.status.healthy {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}
.status.unhealthy {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}
button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 10px 20px;
    margin: 5px;
    border-radius: 4px;
    cursor: pointer;
}
button:hover {
    background-color: #0056b3;
}
.result {
    margin: 10px 0;
    padding: 10px;
    background-color: #f8f9fa;
    border-left: 4px solid #007bff;
}
input {
    padding: 8px;
    margin: 5px;
    border: 1px solid #ddd;
    border-radius: 4px;
}
</style>
</head>
<body>
<div class="container">
    <h1>üê≥ Docker Test Application</h1>
    
    <div id="status" class="status">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞...</div>
    
    <div>
        <h3>üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
        <button onclick="checkHealth()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ</button>
        <button onclick="getSystemInfo()">–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
        <button onclick="getHomeInfo()">–î–æ–º–∞—à–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</button>
    </div>
    
    <div>
        <h3>üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h3>
        <input type="number" id="num1" placeholder="–ß–∏—Å–ª–æ 1" value="10">
        <input type="number" id="num2" placeholder="–ß–∏—Å–ª–æ 2" value="5">
        <button onclick="multiply()">–£–º–Ω–æ–∂–∏—Ç—å</button>
        <button onclick="divide()">–†–∞–∑–¥–µ–ª–∏—Ç—å</button>
    </div>
    
    <div id="result" class="result" style="display:none;"></div>
</div>

<script>
const API_BASE = '/api';

async function checkHealth() {
    try {
        const response = await fetch(`${API_BASE}/health`);
        const data = await response.json();
        showResult('–°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è', data);
        updateStatus(data.status === 'healthy');
    } catch (error) {
        showResult('–û—à–∏–±–∫–∞', { error: error.message });
        updateStatus(false);
    }
}

async function getSystemInfo() {
    try {
        const response = await fetch(`${API_BASE}/info`);
        const data = await response.json();
        showResult('–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è', data);
    } catch (error) {
        showResult('–û—à–∏–±–∫–∞', { error: error.message });
    }
}

async function getHomeInfo() {
    try {
        const response = await fetch(`${API_BASE}/`);
        const data = await response.json();
        showResult('–î–æ–º–∞—à–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞', data);
    } catch (error) {
        showResult('–û—à–∏–±–∫–∞', { error: error.message });
    }
}

async function multiply() {
    const num1 = document.getElementById('num1').value;
    const num2 = document.getElementById('num2').value;
    try {
        const response = await fetch(`${API_BASE}/multiply/${num1}/${num2}`);
        const data = await response.json();
        showResult(`–£–º–Ω–æ–∂–µ–Ω–∏–µ ${num1} √ó ${num2}`, data);
    } catch (error) {
        showResult('–û—à–∏–±–∫–∞', { error: error.message });
    }
}

async function divide() {
    const num1 = document.getElementById('num1').value;
    const num2 = document.getElementById('num2').value;
    try {
        const response = await fetch(`${API_BASE}/divide/${num1}/${num2}`);
        const data = await response.json();
        showResult(`–î–µ–ª–µ–Ω–∏–µ ${num1} √∑ ${num2}`, data);
    } catch (error) {
        showResult('–û—à–∏–±–∫–∞', { error: error.message });
    }
}

function showResult(title, data) {
    const resultDiv = document.getElementById('result');
    resultDiv.innerHTML = `<h4>${title}</h4><pre>${JSON.stringify(data, null, 2)}</pre>`;
    resultDiv.style.display = 'block';
}

function updateStatus(isHealthy) {
    const statusDiv = document.getElementById('status');
    if (isHealthy) {
        statusDiv.className = 'status healthy';
        statusDiv.textContent = '‚úÖ –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ';
    } else {
        statusDiv.className = 'status unhealthy';
        statusDiv.textContent = '‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä–≤–∏—Å–æ–º';
    }
}

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
window.onload = function() {
    checkHealth();
};
</script>
</body>
</html>
